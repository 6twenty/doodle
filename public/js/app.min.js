/*!
 * Paper.js v0.22
 *
 * This file is part of Paper.js, a JavaScript Vector Graphics Library,
 * based on Scriptographer.org and designed to be largely API compatible.
 * http://paperjs.org/
 * http://scriptographer.org/
 *
 * Copyright (c) 2011, Juerg Lehni & Jonathan Puckey
 * http://lehni.org/ & http://jonathanpuckey.com/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Sat Aug 4 11:07:34 2012 +0100
 *
 ***
 *
 * Bootstrap.js JavaScript Framework.
 * http://bootstrapjs.org/
 *
 * Copyright (c) 2006 - 2011 Juerg Lehni
 * http://lehni.org/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Parse-js
 *
 * A JavaScript tokenizer / parser / generator, originally written in Lisp.
 * Copyright (c) Marijn Haverbeke <marijnh@gmail.com>
 * http://marijn.haverbeke.nl/parse-js/
 *
 * Ported by to JavaScript by Mihai Bazon
 * Copyright (c) 2010, Mihai Bazon <mihai.bazon@gmail.com>
 * http://mihai.bazon.net/blog/
 *
 * Modifications and adaptions to browser (c) 2011, Juerg Lehni
 * http://lehni.org/
 *
 * Distributed under the BSD license.
 */var paper=new function(){var e=new function(){function h(e,t,n){if(l)try{return delete e[t],l(e,t,n)}catch(r){}return(n.get||n.set)&&e.__defineGetter__?(n.get&&e.__defineGetter__(t,n.get),n.set&&e.__defineSetter__(t,n.set)):e[t]=n.value,e}function p(e,t){if(c)try{return c(e,t)}catch(n){}var r=e.__lookupGetter__&&e.__lookupGetter__(t);return r?{get:r,set:e.__lookupSetter__(t),enumerable:!0,configurable:!0}:i.call(e,t)?{value:e[t],enumerable:!0,configurable:!0,writable:!0}:null}function d(e,t,r,s,o,a){function c(n,a,c,d){var a=a||(a=p(t,n))&&(a.get?a:a.value),v=typeof a=="function",m=a,g=o||v?a&&a.get?n in e:e[n]:null;d&&v&&(!o||!d[n])&&(d[n]=function(t){return t&&e[n].apply(t,u.call(arguments,1))});if((c||a!==undefined&&i.call(t,n))&&(!o||!g)){if(v){if(g&&/\bthis\.base\b/.test(a)){var y=s&&s[n]==g;m=function(){var e=p(this,"base");h(this,"base",{value:y?s[n]:g,configurable:!0});try{return a.apply(this,arguments)}finally{e?h(this,"base",e):delete this.base}},m.toString=function(){return a.toString()},m.valueOf=function(){return a.valueOf()}}f&&a.length==0&&(l=n.match(/^(get|is)(([A-Z])(.*))$/))&&f.push([l[3].toLowerCase()+l[4],l[2]])}if(!m||v||!m.get)m={value:m,writable:!0};(p(e,n)||{configurable:!0}).configurable&&(m.configurable=!0,m.enumerable=r),h(e,n,m)}}var f,l;if(t){f=[];for(var d in t)i.call(t,d)&&!n.test(d)&&c(d,null,!0,a);c("toString"),c("valueOf");for(var v=0,m=f&&f.length;v<m;v++)try{var l=f[v],g=l[1];c(l[0],{get:e["get"+g]||e["is"+g],set:e["set"+g]},!0)}catch(y){}}return e}function v(e){var n=function(r){t&&h(this,"__proto__",{value:e});if(this.initialize&&r!==n.dont)return this.initialize.apply(this,arguments)};return n.prototype=e,n.toString=function(){return(this.prototype.initialize||function(){}).toString()},n}function m(e){return e?typeof e!="function"?function(t){return t==e}:e:function(e){return e}}function g(t,n,r,i){try{t&&(i||i===undefined&&o(t)?a:f).call(t,m(n),r=r||t)}catch(s){if(s!==e.stop)throw s}return r}function y(e){return g(e,function(e,t){this[t]=e},new e.constructor)}var t=!this.__proto__,n=/^(statics|generics|preserve|enumerable|prototype|__proto__|toString|valueOf)$/,r=Object.prototype,i=t?function(e){return e!=="__proto__"&&this.hasOwnProperty(e)}:r.hasOwnProperty,s=r.toString,r=Array.prototype,o=Array.isArray=Array.isArray||function(e){return s.call(e)==="[object Array]"},u=r.slice,a=r.forEach||function(e,t){for(var n=0,r=this.length;n<r;n++)e.call(t,this[n],n,this)},f=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},l=Object.defineProperty,c=Object.getOwnPropertyDescriptor;return d(function(){},{inject:function(e){if(e){var t=this.prototype,n=t.__proto__&&t.__proto__.constructor,r=e.statics==1?e:e.statics;r!=e&&d(t,e,e.enumerable,n&&n.prototype,e.preserve,e.generics&&this),d(this,r,!0,n,e.preserve)}for(var i=1,s=arguments.length;i<s;i++)this.inject(arguments[i]);return this},extend:function(e){var t=new this(this.dont),n=v(t);return h(t,"constructor",{value:n,writable:!0,configurable:!0}),n.dont={},d(n,this,!0),arguments.length?this.inject.apply(n,arguments):n}},!0).inject({has:i,each:g,inject:function(){for(var e=0,t=arguments.length;e<t;e++)d(this,arguments[e]);return this},extend:function(){var e=new(v(this));return e.inject.apply(e,arguments)},each:function(e,t){return g(this,e,t)},clone:function(){return y(this)},statics:{each:g,clone:y,define:h,describe:p,iterator:m,has:function(e,t){return i.call(e,t)},type:function(e){return(e||e===0)&&(e._type||typeof e)||null},check:function(e){return!!e||e===0},pick:function(){for(var e=0,t=arguments.length;e<t;e++)if(arguments[e]!==undefined)return arguments[e];return null},stop:{}}})};this.Base=e.inject({generics:!0,clone:function(){return new this.constructor(this)},toString:function(){return"{ "+e.each(this,function(t,n){if(n.charAt(0)!="_"){var r=typeof t;this.push(n+": "+(r==="number"?e.formatNumber(t):r==="string"?"'"+t+"'":t))}},[]).join(", ")+" }"},statics:{read:function(e,t,n){var t=t||0,n=n||e.length-t,r=e[t];return r instanceof this||this.prototype._readNull&&r==null&&n<=1?r:(r=new this(this.dont),r.initialize.apply(r,t>0||n<e.length?Array.prototype.slice.call(e,t,t+n):e)||r)},readAll:function(e,t){var n=[],r;for(var i=t||0,s=e.length;i<s;i++)n.push(Array.isArray(r=e[i])?this.read(r,0):this.read(e,i,1));return n},splice:function(e,t,n,r){var i=t&&t.length,s=n===undefined;n=s?e.length:n;for(var o=0;o<i;o++)t[o]._index=n+o;if(s)return e.push.apply(e,t),[];var u=[n,r];t&&u.push.apply(u,t);var a=e.splice.apply(e,u);for(var o=0,f=a.length;o<f;o++)delete a[o]._index;for(var o=n+i,f=e.length;o<f;o++)e[o]._index=o;return a},merge:function(){return e.each(arguments,function(t){e.each(t,function(e,t){this[t]=e},this)},new e,!0)},capitalize:function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},hyphenate:function(e){return e.replace(/[a-z][A-Z0-9]|[0-9][a-zA-Z]|[A-Z]{2}[a-z]/g,function(e){return e.charAt(0)+"-"+e.substring(1)}).toLowerCase()},formatNumber:function(e){return(Math.round(e*1e5)/1e5).toString()}}});var t=this.Point=e.extend({initialize:function(e,t){t!==undefined?(this.x=e,this.y=t):e!==undefined?e==null?this.x=this.y=0:e.x!==undefined?(this.x=e.x,this.y=e.y):e.width!==undefined?(this.x=e.width,this.y=e.height):Array.isArray(e)?(this.x=e[0],this.y=e.length>1?e[1]:e[0]):e.angle!==undefined?(this.x=e.length,this.y=0,this.setAngle(e.angle)):typeof e=="number"?this.x=this.y=e:this.x=this.y=0:this.x=this.y=0},set:function(e,t){return this.x=e,this.y=t,this},clone:function(){return t.create(this.x,this.y)},toString:function(){var t=e.formatNumber;return"{ x: "+t(this.x)+", y: "+t(this.y)+" }"},add:function(e){return e=t.read(arguments),t.create(this.x+e.x,this.y+e.y)},subtract:function(e){return e=t.read(arguments),t.create(this.x-e.x,this.y-e.y)},multiply:function(e){return e=t.read(arguments),t.create(this.x*e.x,this.y*e.y)},divide:function(e){return e=t.read(arguments),t.create(this.x/e.x,this.y/e.y)},modulo:function(e){return e=t.read(arguments),t.create(this.x%e.x,this.y%e.y)},negate:function(){return t.create(-this.x,-this.y)},transform:function(e){return e?e._transformPoint(this):this},getDistance:function(e,n){e=t.read(arguments);var r=e.x-this.x,i=e.y-this.y,s=r*r+i*i;return n?s:Math.sqrt(s)},getLength:function(){var e=this.x*this.x+this.y*this.y;return arguments.length&&arguments[0]?e:Math.sqrt(e)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this.set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();n==0&&this.getAngle(),this.set(this.x*n,this.y*n)}return this},normalize:function(e){e===undefined&&(e=1);var n=this.getLength(),r=n!=0?e/n:0,i=t.create(this.x*r,this.y*r);return i._angle=this._angle,i},getAngle:function(){return this.getAngleInRadians(arguments[0])*180/Math.PI},setAngle:function(e){e=this._angle=e*Math.PI/180;if(!this.isZero()){var t=this.getLength();this.set(Math.cos(e)*t,Math.sin(e)*t)}return this},getAngleInRadians:function(){if(arguments[0]===undefined)return this._angle==null&&(this._angle=Math.atan2(this.y,this.x)),this._angle;var e=t.read(arguments),n=this.getLength()*e.getLength();return n==0?NaN:Math.acos(this.dot(e)/n)},getAngleInDegrees:function(){return this.getAngle(arguments[0])},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3},getDirectedAngle:function(e){return e=t.read(arguments),Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},rotate:function(e,n){e=e*Math.PI/180;var r=n?this.subtract(n):this,i=Math.sin(e),s=Math.cos(e);return r=t.create(r.x*s-r.y*i,r.y*s+r.x*i),n?r.add(n):r},equals:function(e){return e=t.read(arguments),this.x==e.x&&this.y==e.y},isInside:function(e){return e.contains(this)},isClose:function(e,t){return this.getDistance(e)<t},isColinear:function(e){return this.cross(e)<u.TOLERANCE},isOrthogonal:function(e){return this.dot(e)<u.TOLERANCE},isZero:function(){return this.x==0&&this.y==0},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(e){return e=t.read(arguments),this.x*e.x+this.y*e.y},cross:function(e){return e=t.read(arguments),this.x*e.y-this.y*e.x},project:function(e){e=t.read(arguments);if(e.isZero())return t.create(0,0);var n=this.dot(e)/e.dot(e);return t.create(e.x*n,e.y*n)},statics:{create:function(e,n){var r=new t(t.dont);return r.x=e,r.y=n,r},min:function(e,n){return e=t.read(arguments,0,1),n=t.read(arguments,1,1),t.create(Math.min(e.x,n.x),Math.min(e.y,n.y))},max:function(e,n){return e=t.read(arguments,0,1),n=t.read(arguments,1,1),t.create(Math.max(e.x,n.x),Math.max(e.y,n.y))},random:function(){return t.create(Math.random(),Math.random())}}},new function(){return e.each(["round","ceil","floor","abs"],function(e){var n=Math[e];this[e]=function(){return t.create(n(this.x),n(this.y))}},{})}),n=t.extend({set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},statics:{create:function(e,r,i,s,o){if(o)return t.create(i,s);var u=new n(n.dont);return u._x=i,u._y=s,u._owner=e,u._setter=r,u}}}),r=this.Segment=e.extend({initialize:function(e,t,n,r,s,o){var u=arguments.length,a=i.create,f,l,c;u!=0&&(u==1?e.point?(f=e.point,l=e.handleIn,c=e.handleOut):f=e:u<6?u==2&&t.x===undefined?f=[e,t]:(f=e,l=t,c=n):u==6&&(f=[e,t],l=[n,r],c=[s,o])),a(this,"_point",f),a(this,"_handleIn",l),a(this,"_handleOut",c)},_changed:function(e){if(!this._path)return;var t=this._path._curves&&this.getCurve(),n;t&&(t._changed(),(n=t[e==this._point||e==this._handleIn&&t._segment1==this?"getPrevious":"getNext"]())&&n._changed()),this._path._changed(Change.GEOMETRY)},getPoint:function(){return this._point},setPoint:function(e){e=t.read(arguments),this._point.set(e.x,e.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(e){e=t.read(arguments),this._handleIn.set(e.x,e.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(e){e=t.read(arguments),this._handleOut.set(e.x,e.y)},_isSelected:function(e){var t=this._selectionState;return e==this._point?!!(t&s.POINT):e==this._handleIn?!!(t&s.HANDLE_IN):e==this._handleOut?!!(t&s.HANDLE_OUT):!1},_setSelected:function(e,t){var n=this._path,t=!!t,r=this._selectionState||0,i=[!!(r&s.POINT),!!(r&s.HANDLE_IN),!!(r&s.HANDLE_OUT)];if(e==this._point){if(t)i[1]=i[2]=!1;else{var o=this.getPrevious(),u=this.getNext();i[1]=o&&(o._point.isSelected()||o._handleOut.isSelected()),i[2]=u&&(u._point.isSelected()||u._handleIn.isSelected())}i[0]=t}else{var a=e==this._handleIn?1:2;i[a]!=t&&(t&&(i[0]=!1),i[a]=t,n._changed(Change.ATTRIBUTE))}this._selectionState=(i[0]?s.POINT:0)|(i[1]?s.HANDLE_IN:0)|(i[2]?s.HANDLE_OUT:0),n&&r!=this._selectionState&&n._updateSelection(this,r,this._selectionState)},isSelected:function(){return this._isSelected(this._point)},setSelected:function(e){this._setSelected(this._point,e)},getIndex:function(){return this._index!==undefined?this._index:null},getPath:function(){return this._path||null},getCurve:function(){if(this._path){var e=this._index;return!this._path._closed&&e==this._path._segments.length-1&&e--,this._path.getCurves()[e]||null}return null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},reverse:function(){return new r(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new r(this._point,this._handleIn,this._handleOut)},equals:function(e){return e==this||e&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},_transformCoordinates:function(e,t,n){var r=this._point,i=!n||!this._handleIn.isZero()?this._handleIn:null,s=!n||!this._handleOut.isZero()?this._handleOut:null,o=r._x,u=r._y,a=2;t[0]=o,t[1]=u,i&&(t[a++]=i._x+o,t[a++]=i._y+u),s&&(t[a++]=s._x+o,t[a++]=s._y+u);if(!e)return;e._transformCoordinates(t,0,t,0,a/2),o=t[0],u=t[1],n?(r._x=o,r._y=u,a=2,i&&(i._x=t[a++]-o,i._y=t[a++]-u),s&&(s._x=t[a++]-o,s._y=t[a++]-u)):(i||(t[a++]=o,t[a++]=u),s||(t[a++]=o,t[a++]=u))}}),i=t.extend({set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){return this._x==0&&this._y==0},setSelected:function(e){this._owner._setSelected(this,e)},isSelected:function(){return this._owner._isSelected(this)},statics:{create:function(e,n,r){var s=new i(i.dont),o,u,a;return r?(o=r[0])!==undefined?u=r[1]:((o=r.x)===undefined&&(r=t.read(arguments,2,1),o=r.x),u=r.y,a=r.selected):o=u=0,s._x=o,s._y=u,s._owner=e,e[n]=s,a&&s.setSelected(!0),s}}}),s={HANDLE_IN:1,HANDLE_OUT:2,POINT:4},o=this.PathFitter=e.extend({initialize:function(e,t){this.points=[];var n=e._segments,r;for(var i=0,s=n.length;i<s;i++){var o=n[i].point.clone();if(!r||!r.equals(o))this.points.push(o),r=o}this.error=t},fit:function(){return this.segments=[new r(this.points[0])],this.fitCubic(0,this.points.length-1,this.points[1].subtract(this.points[0]).normalize(),this.points[this.points.length-2].subtract(this.points[this.points.length-1]).normalize()),this.segments},fitCubic:function(e,t,n,r){if(t-e==1){var i=this.points[e],s=this.points[t],o=i.getDistance(s)/3;this.addCurve([i,i.add(n.normalize(o)),s.add(r.normalize(o)),s]);return}var u=this.chordLengthParameterize(e,t),a=Math.max(this.error,this.error*this.error),f,l;for(var c=0;c<=4;c++){var h=this.generateBezier(e,t,u,n,r),p=this.findMaxError(e,t,h,u);if(p.error<this.error){this.addCurve(h);return}l=p.index;if(p.error>=a)break;this.reparameterize(e,t,u,h),a=p.error}var d=this.points[l-1].subtract(this.points[l]),v=this.points[l].subtract(this.points[l+1]),m=d.add(v).divide(2).normalize();this.fitCubic(e,l,n,m),this.fitCubic(l,t,m.negate(),r)},addCurve:function(e){var t=this.segments[this.segments.length-1];t.setHandleOut(e[1].subtract(e[0])),this.segments.push(new r(e[3],e[2].subtract(e[3])))},generateBezier:function(e,t,n,r,i){var s=u.EPSILON,o=this.points[e],a=this.points[t],f=[[0,0],[0,0]],l=[0,0];for(var c=0,h=t-e+1;c<h;c++){var p=n[c],d=1-p,v=3*p*d,m=d*d*d,g=v*d,y=v*p,b=p*p*p,w=r.normalize(g),E=i.normalize(y),S=this.points[e+c].subtract(o.multiply(m+g)).subtract(a.multiply(y+b));f[0][0]+=w.dot(w),f[0][1]+=w.dot(E),f[1][0]=f[0][1],f[1][1]+=E.dot(E),l[0]+=w.dot(S),l[1]+=E.dot(S)}var x=f[0][0]*f[1][1]-f[1][0]*f[0][1],T,N;if(Math.abs(x)>s){var C=f[0][0]*l[1]-f[1][0]*l[0],k=l[0]*f[1][1]-l[1]*f[0][1];T=k/x,N=C/x}else{var L=f[0][0]+f[0][1],A=f[1][0]+f[1][1];Math.abs(L)>s?T=N=l[0]/L:Math.abs(A)>s?T=N=l[1]/A:T=N=0}var O=a.getDistance(o);s*=O;if(T<s||N<s)T=N=O/3;return[o,o.add(r.normalize(T)),a.add(i.normalize(N)),a]},reparameterize:function(e,t,n,r){for(var i=e;i<=t;i++)n[i-e]=this.findRoot(r,this.points[i],n[i-e])},findRoot:function(e,t,n){var r=[],i=[];for(var s=0;s<=2;s++)r[s]=e[s+1].subtract(e[s]).multiply(3);for(var s=0;s<=1;s++)i[s]=r[s+1].subtract(r[s]).multiply(2);var o=this.evaluate(3,e,n),a=this.evaluate(2,r,n),f=this.evaluate(1,i,n),l=o.subtract(t),c=a.dot(a)+l.dot(f);return Math.abs(c)<u.TOLERANCE?n:n-l.dot(a)/c},evaluate:function(e,t,n){var r=t.slice();for(var i=1;i<=e;i++)for(var s=0;s<=e-i;s++)r[s]=r[s].multiply(1-n).add(r[s+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){var n=[0];for(var r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,i=t-e;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(e,t,n,r){var i=Math.floor((t-e+1)/2),s=0;for(var o=e+1;o<t;o++){var u=this.evaluate(3,n,r[o-e]),a=u.subtract(this.points[o]),f=a.x*a.x+a.y*a.y;f>=s&&(s=f,i=o)}return{error:s,index:i}}}),u=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,i=Math.cos,s=Math.PI;return{TOLERANCE:1e-5,EPSILON:1e-11,integrate:function(n,r,i,s){var o=e[s-2],u=t[s-2],a=.5*(i-r),f=a+r,l=0,c=s+1>>1,h=s&1?u[l++]*n(f):0;while(l<c){var p=a*o[l];h+=u[l++]*(n(f+p)+n(f-p))}return a*h},findRoot:function(e,t,r,i,s,o,u){for(var a=0;a<o;a++){var f=e(r),l=f/t(r);if(n(l)<u)return r;var c=r-l;f>0?(s=r,r=c<=i?.5*(i+s):c):(i=r,r=c>=s?.5*(i+s):c)}},solveQuadratic:function(e,t,i,s,o){if(n(e)<o)return n(t)>=o?(s[0]=-i/t,1):n(i)<o?-1:0;var u=t*t-4*e*i;if(u<0)return 0;u=r(u),t<0&&(u=-u),u=(t+u)*-0.5;var a=0;return n(u)>=o&&(s[a++]=i/u),n(e)>=o&&(s[a++]=u/e),a},solveCubic:function(e,t,o,a,f,l){if(n(e)<l)return u.solveQuadratic(t,o,a,f,l);t/=e,o/=e,a/=e;var c=(t*t-3*o)/9,h=(2*t*t*t-9*t*o+27*a)/54,p=c*c*c,d=h*h;t/=3;if(d<p){var v=Math.acos(h/r(p)),m=-2*r(c);return f[0]=m*i(v/3)-t,f[1]=m*i((v+2*s)/3)-t,f[2]=m*i((v-2*s)/3)-t,3}var g=-Math.pow(n(h)+r(d-p),1/3);h<0&&(g=-g);var y=n(g)<l?0:c/g;return f[0]=g+y-t,1}}}};
;(function(a){a.cookie=function(b,c,d){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(c))||c===null||c===undefined)){d=a.extend({},d);if(c===null||c===undefined){d.expires=-1}if(typeof d.expires==="number"){var e=d.expires,f=d.expires=new Date;f.setDate(f.getDate()+e)}c=String(c);return document.cookie=[encodeURIComponent(b),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};var g=d.raw?function(a){return a}:decodeURIComponent;var h=document.cookie.split("; ");for(var i=0,j;j=h[i]&&h[i].split("=");i++){if(g(j[0])===b)return g(j[1]||"")}return null}})(jQuery);
;(function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=true,g=0,h=0;b=a.event.fix(c);b.type="mousewheel";if(c.wheelDelta){e=c.wheelDelta/120}if(c.detail){e=-c.detail/3}h=e;if(c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS){h=0;g=-1*e}if(c.wheelDeltaY!==undefined){h=c.wheelDeltaY/120}if(c.wheelDeltaX!==undefined){g=-1*c.wheelDeltaX/120}d.unshift(b,e,g,h);return(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks){for(var c=b.length;c;){a.event.fixHooks[b[--c]]=a.event.mouseHooks}}a.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var a=b.length;a;){this.addEventListener(b[--a],d,false)}}else{this.onmousewheel=d}},teardown:function(){if(this.removeEventListener){for(var a=b.length;a;){this.removeEventListener(b[--a],d,false)}}else{this.onmousewheel=null}}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery)
//     keymaster.js
//     (c) 2011 Thomas Fuchs
//     keymaster.js may be freely distributed under the MIT license.
;(function(a){function h(a,b){var c=a.length;while(c--)if(a[c]===b)return c;return-1}function i(a){var b,g,i,j,k;b=a.keyCode;if(b==93||b==224)b=91;if(b in d){d[b]=!0;for(i in f)f[i]==b&&(l[i]=!0);return}if(!l.filter.call(this,a))return;if(!(b in c))return;for(j=0;j<c[b].length;j++){g=c[b][j];if(g.scope==e||g.scope=="all"){k=g.mods.length>0;for(i in d)if(!d[i]&&h(g.mods,+i)>-1||d[i]&&h(g.mods,+i)==-1)k=!1;(g.mods.length==0&&!d[16]&&!d[18]&&!d[17]&&!d[91]||k)&&g.method(a,g)===!1&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0))}}}function j(a){var b=a.keyCode,c;if(b==93||b==224)b=91;if(b in d){d[b]=!1;for(c in f)f[c]==b&&(l[c]=!1)}}function k(){for(b in d)d[b]=!1;for(b in f)l[b]=!1}function l(a,b,d){var e,h,i,j;d===undefined&&(d=b,b="all"),a=a.replace(/\s/g,""),e=a.split(","),e[e.length-1]==""&&(e[e.length-2]+=",");for(i=0;i<e.length;i++){h=[],a=e[i].split("+");if(a.length>1){h=a.slice(0,a.length-1);for(j=0;j<h.length;j++)h[j]=f[h[j]];a=[a[a.length-1]]}a=a[0],a=g[a]||a.toUpperCase().charCodeAt(0),a in c||(c[a]=[]),c[a].push({shortcut:e[i],scope:b,method:d,key:e[i],mods:h})}}function m(a){var b=(a.target||a.srcElement).tagName;return b!="INPUT"&&b!="SELECT"&&b!="TEXTAREA"}function n(a){e=a||"all"}function o(){return e||"all"}function p(a){var b,d,e;for(b in c){d=c[b];for(e=0;e<d.length;)d[e].scope===a?d.splice(e,1):e++}}function q(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,function(){c(window.event)})}var b,c={},d={16:!1,18:!1,17:!1,91:!1},e="all",f={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},g={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220};for(b=1;b<20;b++)f["f"+b]=111+b;for(b in f)l[b]=!1;q(document,"keydown",i),q(document,"keyup",j),q(window,"focus",k),a.key=l,a.key.setScope=n,a.key.getScope=o,a.key.deleteScope=p,a.key.filter=m,typeof module!="undefined"&&(module.exports=key)})(this);
;(function(a,b){function c(){this.hasDeviceMotion="ondevicemotion"in a;this.threshold=15;this.lastTime=new Date;this.lastX=null;this.lastY=null;this.lastZ=null;this.event=b.createEvent("Event");this.event.initEvent("shake",true,true)}c.prototype.reset=function(){this.lastTime=new Date;this.lastX=null;this.lastY=null;this.lastZ=null};c.prototype.start=function(){this.reset();if(this.hasDeviceMotion){a.addEventListener("devicemotion",this,false)}};c.prototype.stop=function(){if(this.hasDeviceMotion){a.removeEventListener("devicemotion",this,false)}this.reset()};c.prototype.devicemotion=function(b){var c=b.accelerationIncludingGravity,d,e,f=0,g=0,h=0;if(this.lastX===null&&this.lastY===null&&this.lastZ===null){this.lastX=c.x;this.lastY=c.y;this.lastZ=c.z;return}f=Math.abs(this.lastX-c.x);g=Math.abs(this.lastY-c.y);h=Math.abs(this.lastZ-c.z);if(f>this.threshold&&g>this.threshold||f>this.threshold&&h>this.threshold||g>this.threshold&&h>this.threshold){d=new Date;e=d.getTime()-this.lastTime.getTime();if(e>1e3){a.dispatchEvent(this.event);this.lastTime=new Date}}};c.prototype.handleEvent=function(a){if(typeof this[a.type]==="function"){return this[a.type](a)}};var d=new c;d.start()})(window,document)
;(function(){qd.defaults={},qd.defaults.pen={},qd.pen={},qd.toolbar={},qd.toolbar.colours={},qd.options={},qd.options.pen={},qd.path={},qd.events={},qd.events.draw={},qd.events.drag={},qd.events.penSize={},qd.server={},qd.help={},qd.normalize={}})(),function(){qd.options.mode=["draw","drag"],qd.options.zoom=[0,10],qd.options.pen.mode=["draw","erase"],qd.options.pen.size=[1,100],qd.options.pen.eraserSize=[1,100],qd.options.pen.opacity=[.01,1],qd.options.pen.color=["#46648e","#8bbbff","#89ad48","#d1d642","#8c5ba7","#ca76bf","#d7503c","#d17060","#f49f14","#fae014","#000000","#ffffff"]}(),function(){qd.defaults.mode="draw",qd.defaults.zoom=1,qd.defaults.size=3200,qd.defaults.pen.mode="draw",qd.defaults.pen.color="black",qd.defaults.pen.size=10,qd.defaults.pen.eraserSize=10,qd.defaults.pen.opacity=1}(),function(){_.each(["mode","zoom","size"],function(attr){qd["_"+attr]=qd.defaults[attr]}),_.each(["mode","color","size","eraserSize","opacity"],function(attr){qd.pen["_"+attr]=qd.defaults.pen[attr]})}(),function(){qd.mode=function(newVal){return newVal&&_.include(qd.options.mode,newVal)?(this._mode=newVal,qd.$body.removeClass("crosshair move").addClass(this._mode=="draw"?"crosshair":"move"),this._mode):this._mode},qd.pen.mode=function(newVal){return newVal&&_.include(qd.options.pen.mode,newVal)?(this._mode=newVal,qd.pen.update(),this._mode):this._mode},qd.pen.color=function(newVal){return newVal&&_.include(qd.options.pen.color,newVal)?(this._color=newVal,qd.pen.update(),this._color):this._color},_.each(["size","eraserSize","opacity"],function(key){qd.pen[key]=function(newVal){var range=qd.options.pen[key];return _.isFinite(newVal)&&newVal>=range[0]&&newVal<=range[1]?(this["_"+key]=+newVal.toFixed(2),qd.pen.update(),this["_"+key]):this["_"+key]}})}(),function(){qd.pen.update=function(){qd.path._attrsChanged=!0,qd.pen.uiPen.attr({r:(qd.pen._mode=="draw"?qd.pen._size:qd.pen._eraserSize)/2,fill:qd.pen._mode=="draw"?qd.pen._color:"white",opacity:qd.pen._mode=="draw"?qd.pen._opacity:1})},qd.path._attrsChanged=!0,qd.path.attrs=function(){return qd.path._attrsChanged&&(qd.path._attrsCache={stroke:qd.pen._mode=="draw"?qd.pen._color:"white",opacity:qd.pen._mode=="draw"?qd.pen._opacity:1,"stroke-width":(qd.pen._mode=="draw"?qd.pen._size:qd.pen._eraserSize)*qd._zoom,"stroke-linecap":"round","stroke-linejoin":"round"},qd.path._attrsChanged=!1),qd.path._attrsCache},qd.undo=function(){if(!qd.paths._array.length)return!1;var path=qd.paths.pop(),serialized=qd.server.serializePath(path);path._raphael.remove(),qd.undos.push(serialized),qd.server.patch()},qd.redo=function(){if(!qd.undos._array.length)return!1;var serialized=qd.undos.pop(),path=qd.server.deserializePath(serialized);qd.paths.push(path),qd.server.patch(path)},qd.normalize.eventCoordinates=function(e){return{x:e.pageX,y:e.pageY}},qd.normalize.coordinatesWithOffset=function(coords){return{x:coords.x+qd.offset.x,y:coords.y+qd.offset.y}},qd.normalize.eventCoordinatesWithOffset=function(e){return qd.normalize.coordinatesWithOffset(qd.normalize.eventCoordinates(e))},qd.normalize.touchEventCoordinates=function(e,i){return{x:e.originalEvent.targetTouches[i||0].pageX,y:e.originalEvent.targetTouches[i||0].pageY}},qd.normalize.touchEventCoordinatesWithOffset=function(e,i){return qd.normalize.coordinatesWithOffset(qd.normalize.touchEventCoordinates(e,i))}}(),function(){qd.Collection=function(){var collection=this;collection._array=[],collection._set=qd.canvas.set(),collection.push=function(path){return collection._set.push(path._raphael),collection._array.push(path)},collection.pop=function(){return collection._set.pop(),collection._array.pop()},_.each(["getBBox","transform"],function(method){collection[method]=function(){return collection._set[method].apply(collection._set,arguments)}})}}(),function(){qd.Path=function(){var path=this;path._segments=[],path._string="",path._raphael=undefined,path.moveTo=function(x,y){return path._segments.push(new paper.Segment(x,y)),path._string="M"+[x,y].join(",")+"L"+[x,y].join(","),path._raphael=qd.canvas.path(path._string).attr(qd.path.attrs()),path._raphael.transform("T"+[-qd.offset.x,-qd.offset.y].join(",")),[x,y]},path.lineTo=function(x,y){return path._segments.push(new paper.Segment(x,y)),path._string+=" "+[x,y].join(","),path._raphael.attr("path",path._string),[x,y]},path.simplify=function(tolerance){var newPath;if(path._segments.length>3){var fitter=new paper.PathFitter(path,tolerance);path._segments=fitter.fit();var previousSegment;newPath="M",_.each(path._segments,function(segment,i){var x1=previousSegment?previousSegment.point.x+previousSegment.handleOut.x:null,y1=previousSegment?previousSegment.point.y+previousSegment.handleOut.y:null,x2=previousSegment?segment.point.x+segment.handleIn.x:null,y2=previousSegment?segment.point.y+segment.handleIn.y:null,x=segment.point.x,y=segment.point.y;i===0?newPath+=[x,y].join(" ")+"C":newPath+=[x1,y1,x2,y2,x,y].join(" ")+" ",previousSegment=segment}),path._raphael.remove(),path._raphael=qd.canvas.path(newPath).attr(qd.path.attrs()),path._raphael.transform("T"+[-qd.offset.x,-qd.offset.y].join(","))}}}}(),function(){qd.events.drag.start=function(coords){qd._dragging||(qd._dragging=!0,qd.events.drag._origin=coords)},qd.events.drag.move=_.throttle(function(coords){if(qd._dragging){var origin=qd.events.drag._origin,distance={x:coords.x-origin.x,y:coords.y-origin.y},offset={x:-(qd.offset.x-distance.x),y:-(qd.offset.y-distance.y)};qd._coordsCache=coords,qd._transform.t="T"+[offset.x,offset.y].join(","),qd.paths.transform(qd._transform.toString())}},15),qd.events.drag.stop=function(coords){if(qd._dragging){qd._dragging=!1,!coords.x&&!coords.y&&(coords=qd._coordsCache,delete qd._coordsCache);var origin=qd.events.drag._origin,distance={x:coords.x-origin.x,y:coords.y-origin.y},offset={x:qd.offset.x-distance.x,y:qd.offset.y-distance.y};qd.offset=offset,delete qd.events.drag._origin}}}(),function(){qd.events.draw.start=function(coords){qd._drawing||(qd._drawing=!0,qd._path=new qd.Path,qd._path.moveTo(coords.x,coords.y),qd._coordsCache=coords)},qd.events.draw.move=_.throttle(function(coords){qd._drawing&&(qd._path.lineTo(coords.x,coords.y),qd._coordsCache=coords)},15),qd.events.draw.stop=function(coords){qd._drawing&&(qd._drawing=!1,!coords.x&&!coords.y&&(coords=qd._coordsCache,delete qd._coordsCache),qd._path.lineTo(coords.x,coords.y),qd._path.simplify(qd.pen._mode=="draw"?qd.pen._size*2.5:1),qd.undos=new qd.Collection,qd.paths.push(qd._path),qd.server.patch(qd._path),delete qd._path)}}(),function(){qd.events.penSize.start=function(e){qd._penSizing||(qd._penSizing=!0,e.preventDefault(),e.stopPropagation(),qd._bodyClass=qd.$body.attr("class"),qd.$body.removeClass("crosshair move"))},qd.events.penSize.move=function(e,coords){if(qd._penSizing){e.preventDefault(),e.stopPropagation();var radius=qd.options.pen.size[1]/2,center={x:radius+10,y:radius+10},distance={x:coords.x-center.x,y:coords.y-center.y};radius=Math.sqrt(distance.x*distance.x+distance.y*distance.y),qd.pen.size(radius*2)}},qd.events.penSize.stop=function(e){qd._penSizing&&(e.preventDefault(),e.stopPropagation(),qd._penSizing=!1,qd.$body.addClass(qd._bodyClass),delete qd._bodyClass)}}(),function(){qd.server.serializePath=function(path){return{string:path._raphael.attr("path")+"",pen:{size:path._raphael.attr("stroke-width"),color:path._raphael.attr("stroke"),opacity:path._raphael.attr("opacity")}}},qd.server.deserializePath=function(object){var path=new qd.Path;return path._raphael=qd.canvas.path(object.string).attr({stroke:object.pen.color,opacity:object.pen.opacity,"stroke-width":object.pen.size,"stroke-linecap":"round","stroke-linejoin":"round"}),path},qd.server.patch=function(path){var data={_method:"patch"};path?data.path=JSON.stringify(qd.server.serializePath(path)):data._delete="1",$.ajax({type:"POST",url:"/"+qd.id,data:data,dataType:"json"})}}(),function(){window.$win=$(window),window.$doc=$(document),$doc.on("contextmenu",function(){return!1})}(),$(function(){qd.$body=$("body"),qd.$window=$("#window"),qd.$canvas=$("#canvas"),qd.mode(qd._mode);var w=$win.width(),h=$win.height();qd.center={x:w/2,y:h/2},qd.offset={x:0,y:0},qd._transform={t:"",s:"",toString:function(){return[this.t,this.s].join("")}},qd.canvas=Raphael("canvas","100%","100%"),qd.ui=Raphael("ui","100%","100%"),qd.paths=new qd.Collection,qd.undos=new qd.Collection,qd.canvas.rect(0,0,"100%","100%").attr({fill:"white",stroke:"#ccc","stroke-width":1}),_.each(qd._initial,function(serialized){var path=qd.server.deserializePath(serialized);qd.paths.push(path)}),delete qd._initial;if(qd.paths._array.length){var bbox=qd.paths.getBBox();qd.events.drag.start({x:0,y:0}),qd.events.drag.move({x:-(bbox.x-qd.center.x)-bbox.width/2,y:-(bbox.y-qd.center.y)-bbox.height/2}),qd.events.drag.stop({x:0,y:0})}}),function(){var _modeCache;$doc.on("keydown",function(e){e.which==16&&(qd._shift=!0,_modeCache=qd._mode,qd.mode(_modeCache=="draw"?"drag":"draw"))}).on("keyup",function(e){e.which==16&&(qd.events[qd._mode].stop({x:0,y:0}),qd.mode(_modeCache),qd._shift=!1)}),_.each([1,2,3,4,5,6,7,8,9,0],function(num,i){key(""+num,function(){qd.pen.opacity(num?+("0."+num):1)}),key("shift+"+num,function(){qd.pen.color(qd.options.pen.color[i])})}),key("d",function(){_.each(["color","size","eraserSize","opacity"],function(attr){qd.pen["_"+attr]=qd.defaults.pen[attr]})}),key("/, shift+/",function(){qd.help._open?(qd.help.set.stop().animate({transform:"T0,-1000"},300),qd.help._open=!1):(qd.help.set.stop().animate({transform:"T0,0"},300),qd.help._open=!0)}),key("esc",function(){qd.help.set.stop().animate({transform:"T0,-1000"},300),qd.help._open=!1}),$win.on("shake",qd.undo);var degrees={opacity:.01,size:1};$win.on("mousewheel",_.throttle(function(e,delta){var attr=qd.pen._mode=="erase"?"eraserSize":"size",degree=degrees[qd._shift?"opacity":"size"],neg=delta<0,prop=qd._shift?"opacity":attr;neg&&(degree=-degree),qd.pen[prop](qd.pen["_"+prop]+degree)},15))}(),$(function(){qd.help.set=qd.ui.set();var a=qd.ui.rect(51,51,$win.width()-99,$win.height()-99,12).attr({fill:"none",stroke:"#000","stroke-width":2,opacity:.25}),b=qd.ui.rect(51,51,$win.width()-98,$win.height()-98,14).attr({fill:"none",stroke:"#000","stroke-width":2,opacity:.1}),c=qd.help.container=qd.ui.rect(50,50,$win.width()-100,$win.height()-100,10).attr({fill:"#fff",stroke:"none",opacity:.97});qd.help.set.push(a),qd.help.set.push(b),qd.help.set.push(c),qd.help.set.transform("T0,-1000"),qd.help.container.node.style.cursor="default",$(qd.help.container.node).on("mousedown touchstart",function(e){e.stopPropagation()}).on("mouseup touchend mousemove touchmove",function(e){!qd._drawing&&!qd._dragging?e.stopPropagation():qd.help.container.node.style.cursor=""})}),$(function(){var radius=qd.options.pen.size[1]/2,center={x:radius+13,y:radius+13};qd.ui.circle(center.x,center.y,radius).attr({fill:"url(/img/pattern.png)"}),qd.ui.circle(center.x+1,center.y+1,radius).attr({fill:"none",stroke:"#000","stroke-width":6,opacity:.5}),qd.ui.circle(center.x+2,center.y+2,radius).attr({fill:"none",stroke:"#000","stroke-width":6,opacity:.25}),qd.pen.uiRing=qd.ui.circle(center.x,center.y,radius).attr({stroke:"#fff","stroke-width":6}),qd.pen.uiPen=qd.ui.circle(center.x,center.y,qd.pen._size/2).attr({fill:qd.pen._color,stroke:"none",opacity:qd.pen._opacity})}),$(function(){}),$(function(){qd.$window.on("mousedown",function(e){e.preventDefault(),qd._mode=="draw"?qd.events.draw.start(qd.normalize.eventCoordinatesWithOffset(e)):qd.events.drag.start(qd.normalize.eventCoordinates(e))}).on("mousemove",function(e){e.preventDefault(),qd._mode=="draw"?qd.events.draw.move(qd.normalize.eventCoordinatesWithOffset(e)):qd.events.drag.move(qd.normalize.eventCoordinates(e))}).on("mouseup mouseleave",function(e){e.preventDefault(),qd._mode=="draw"?qd.events.draw.stop(qd.normalize.eventCoordinatesWithOffset(e)):qd.events.drag.stop(qd.normalize.eventCoordinates(e))}),qd.$window.on("touchstart",function(e){e.preventDefault(),qd._touchMoves=0;if(!qd._trackTouch||!qd._touchCache)qd._trackTouch=e.originalEvent.targetTouches[0].identifier,qd._touchCache=qd.normalize.touchEventCoordinates(e);e.originalEvent.targetTouches.length===1?qd.mode("draw"):qd._drawing||qd.mode("drag")}).on("touchmove",function(e){e.preventDefault(),qd._touchMoves++,qd._touchMoves>3&&e.originalEvent.targetTouches[0].identifier==qd._trackTouch&&(qd._mode=="draw"?(qd._drawing||qd.events.draw.start(qd.normalize.coordinatesWithOffset(qd._touchCache)),qd.events.draw.move(qd.normalize.touchEventCoordinatesWithOffset(e))):(qd._dragging||qd.events.drag.start(qd._touchCache),qd.events.drag.move(qd.normalize.touchEventCoordinates(e))))}).on("touchend",function(e){e.preventDefault(),qd._trackTouch&&(qd._mode=="draw"?(qd._drawing||qd.events.draw.start(qd.normalize.coordinatesWithOffset(qd._touchCache)),qd.events.draw.stop({x:0,y:0})):qd.events.drag.stop({x:0,y:0}),delete qd._trackTouch,delete qd._touchCache,delete qd._touchMoves)})})