(function(a,b){function c(){this.hasDeviceMotion="ondevicemotion"in a;this.threshold=15;this.lastTime=new Date;this.lastX=null;this.lastY=null;this.lastZ=null;this.event=b.createEvent("Event");this.event.initEvent("shake",true,true)}c.prototype.reset=function(){this.lastTime=new Date;this.lastX=null;this.lastY=null;this.lastZ=null};c.prototype.start=function(){this.reset();if(this.hasDeviceMotion){a.addEventListener("devicemotion",this,false)}};c.prototype.stop=function(){if(this.hasDeviceMotion){a.removeEventListener("devicemotion",this,false)}this.reset()};c.prototype.devicemotion=function(b){var c=b.accelerationIncludingGravity,d,e,f=0,g=0,h=0;if(this.lastX===null&&this.lastY===null&&this.lastZ===null){this.lastX=c.x;this.lastY=c.y;this.lastZ=c.z;return}f=Math.abs(this.lastX-c.x);g=Math.abs(this.lastY-c.y);h=Math.abs(this.lastZ-c.z);if(f>this.threshold&&g>this.threshold||f>this.threshold&&h>this.threshold||g>this.threshold&&h>this.threshold){d=new Date;e=d.getTime()-this.lastTime.getTime();if(e>1e3){a.dispatchEvent(this.event);this.lastTime=new Date}}};c.prototype.handleEvent=function(a){if(typeof this[a.type]==="function"){return this[a.type](a)}};var d=new c;d.start()})(window,document)